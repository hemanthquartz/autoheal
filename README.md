| **Role Name**                           | **Attached To**                                       | **Trust Policy**               | **Purpose**                                                          | **Key Permissions**                                                   |
| --------------------------------------- | ----------------------------------------------------- | ------------------------------ | -------------------------------------------------------------------- | --------------------------------------------------------------------- |
| `ace-da-emreks-lambda-role`             | AWS Lambda                                            | `lambda.amazonaws.com`         | Extract metadata from files, call Step Function or write to DynamoDB | `dynamodb:PutItem`, `states:StartExecution`, `s3:GetObject`, `logs:*` |
| `ace-da-emreks-stepfunction-role`       | AWS Step Functions                                    | `states.amazonaws.com`         | Invoke EMR on EKS job, call Lambda, write logs                       | `lambda:InvokeFunction`, `emr-containers:StartJobRun`, `logs:*`       |
| `ace-da-emreks-emr-on-eks-role`         | EMR on EKS Job Run                                    | `emr-containers.amazonaws.com` | Allow EMR to read/write to S3, access Glue catalog, write logs       | `s3:*`, `glue:Get*`, `logs:*`, `kms:Decrypt`                          |
| `ace-da-emreks-emr-virtualcluster-role` | EMR on EKS Virtual Cluster (optional)                 | `emr-containers.amazonaws.com` | Manage EMR virtual cluster lifecycle (only if needed explicitly)     | `eks:AccessKubernetesApi`, `eks:DescribeCluster`                      |
| `ace-da-emreks-eks-node-role`           | EKS Worker Nodes (EC2)                                | `ec2.amazonaws.com`            | Allow EC2 nodes to join EKS cluster and access resources             | `eks:DescribeCluster`, `ecr:GetAuthorizationToken`, `logs:*`, `s3:*`  |
| `ace-da-emreks-eks-pod-role`            | IAM Roles for Service Accounts (IRSA) in EKS          | `sts.amazonaws.com`            | Fine-grained access for pods (EMR job pods)                          | `s3:*`, `glue:*`, `cloudwatch:PutMetricData`                          |
| `ace-da-emreks-glue-role`               | AWS Glue Job / Crawler                                | `glue.amazonaws.com`           | Read/write to S3, access Glue catalog, write logs                    | `s3:*`, `glue:*`, `logs:*`, `kms:Decrypt`                             |
| `ace-da-emreks-eventbridge-role`        | EventBridge rule targets (e.g. Step Function, Lambda) | `events.amazonaws.com`         | Allow EventBridge to invoke targets like Lambda or Step Functions    | `lambda:InvokeFunction`, `states:StartExecution`                      |
| `ace-da-emreks-sfn-caller-lambda-role`  | Lambda that starts Step Function execution            | `lambda.amazonaws.com`         | Trigger Step Function from Lambda                                    | `states:StartExecution`                                               |
| `ace-da-emreks-crawler-role`            | Glue Crawler                                          | `glue.amazonaws.com`           | Read S3 data and update Glue Data Catalog                            | `s3:GetObject`, `glue:UpdateTable`                                    |
